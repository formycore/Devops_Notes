    - name: Enabling IPV4 packet farwarding 
      blockinfile:
        path: /etc/modules-load.d/k8s.conf
        create: yes
        block: |
          overlay
          br_netfilter
    - name: sysctl params required by setup params persist across reboots
      blockinfile:
        path: /etc/sysctl.d/k8s.conf
        create: yes
        block: |
          net.bridge.bridge-nf-call-iptables  = 1
          net.bridge.bridge-nf-call-ip6tables = 1
          net.ipv4.ip_forward = 1
    - name: Apply sysctl params without reboot
      command: sudo sysctl --system
      changed_when: false 
       #This does not mark the task as changed automatically (Ansible will show "changed" every time).
       #You can make it cleaner with changed_when: false
    - name: Verify IPv4 Packet Forwarding
      command: sysctl net.ipv4.ip_forward
      register: ip_forward_result
    - name: view the ip_forward_result
      debug:
        msg: "{{ ip_forward_result.stdout }}"
    - name: Verify that the br_netfilter, overlay modules are loaded by running the following commands
      modprobe:
        name: "{{ item }}"
        state: present
      loop:
        - br_netfilter
        - overlay
      register: br_netfilter_overlay_result
    - name: view the output of the overlay & br_netfilter
      debug:
        msg: "{{ br_netfilter_overlay_result.results }}"
        # results for loop,with_items
        # stdout for shell,commands
    - name: Set SELinux to permissive temporarily (runtime)
      command: setenforce 0
      when: ansible_selinux.status == "enabled"
    - name: Set SELinux to permissive
      replace:
        path: /etc/selinux/config
        regexp: '^SELINUX=enforcing$'
        replace: 'SELINUX=permissive'
                                         